<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Secret Garden · 私密花园</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Noto+Serif+SC:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/styles.css">
</head>
<body class="page-secret">
  <!-- 私密 B 界面：独立页面，入口需要密码验证 -->
  <div class="backdrop">
    <div class="glow glow-1"></div>
    <div class="glow glow-2"></div>
    <div class="stars"></div>
    <div class="fireflies" aria-hidden="true"></div>
  </div>

  <header class="hero">
    <div class="hero__content">
      <p class="eyebrow">B · Password Zone</p>
      <h1>Welcome to Our <span>Secret Garden</span></h1>
      <p class="lede">注册后即可进入。花朵随日记数量生长，时间在此刻轻声流动。</p>
      <div class="hero__actions">
        <button class="btn" id="openSecret">登录 / 注册</button>
        <a class="btn ghost" href="/">返回游客模式</a>
      </div>
      <div class="tiny-meta" id="clock"></div>
    </div>
    <div class="hero__panel">
      <div class="glass-card">
        <p class="panel-title">私密花朵</p>
        <p class="muted">日记越多，花瓣越茂盛。解锁后即可写下新的故事。</p>
      </div>
    </div>
  </header>

  <main>
    <section class="section secret" id="secret-area">
      <div class="section__header">
        <div>
          <p class="eyebrow">我们的日记</p>
          <h2>共同的记忆</h2>
          <p class="muted">支持写作、编辑公开状态与删除。只有通过密码的人能看到。</p>
        </div>
      </div>
      <div class="grid two-col">
        <div class="glass-card pad">
          <div class="subhead">写一篇日记</div>
          <form id="diaryForm" class="stack">
            <input name="title" placeholder="标题" maxlength="80" required />
            <textarea name="content" placeholder="正文…" rows="5" required></textarea>
            <label class="checkbox"><input type="checkbox" name="is_public" /> 允许片段在游客区展示</label>
            <button class="btn" type="submit">保存日记</button>
            <p class="form-hint" id="diaryHint"></p>
          </form>
        </div>
        <div class="glass-card pad">
          <div class="subhead">日记列表</div>
          <div id="secretDiaryList" class="diary-list"></div>
        </div>
      </div>
      <div class="glass-card pad">
        <div class="subhead">正式留言（展示在游客区）</div>
        <form id="userMessageForm" class="stack">
          <textarea name="content" placeholder="写下一句话，游客区会显示用户名" rows="3" maxlength="260" required></textarea>
          <button class="btn soft" type="submit">发布留言</button>
          <p class="form-hint" id="userMessageHint"></p>
        </form>
        <p class="muted">发布后会出现在 A 区域“正式用户留言”列表。</p>
      </div>
      <div class="glass-card pad" id="private-notes">
        <div class="subhead">我们的小纸条</div>
        <form id="privateMessageForm" class="stack">
          <input name="to_name" placeholder="想对谁说" maxlength="20" required />
          <textarea name="content" placeholder="写下悄悄话…" rows="3" maxlength="300" required></textarea>
          <button class="btn soft" type="submit">送出纸条</button>
          <p class="form-hint" id="privateHint"></p>
        </form>
        <div id="privateMessages" class="bubble-list"></div>
      </div>
      <div class="glass-card pad" id="userProfile"></div>
    </section>
  </main>

  <!-- 隐藏入口：月亮按钮在公共页，管理按钮在左侧，保证此页更纯净 -->
  <div class="corner-nav">
    <a class="corner-btn" href="/admin.html" title="管理员通道" aria-label="管理员入口">✿</a>
    <a class="corner-btn ghost" href="/" title="返回游客模式" aria-label="返回游客">←</a>
  </div>

  <div class="modal" id="secretModal" aria-hidden="true">
    <div class="modal__content glass-card">
      <button class="close" id="closeModal">×</button>
      <h3>进入 Secret Garden 深处</h3>
      <p class="muted">使用你的账号来写日记、发纸条。</p>
      <div class="grid two-col">
        <form id="secretLoginForm" class="stack">
          <input name="username" placeholder="用户名" minlength="3" required />
          <input type="password" name="password" placeholder="密码" minlength="6" required />
          <button class="btn" type="submit">登录</button>
          <p class="form-hint" id="secretHint"></p>
        </form>
        <form id="registerForm" class="stack">
          <input name="username" placeholder="新用户名" minlength="3" required />
          <input type="password" name="password" placeholder="设置密码" minlength="6" required />
          <button class="btn ghost" type="submit">注册并进入</button>
          <p class="form-hint" id="registerHint"></p>
        </form>
      </div>
    </div>
  </div>

  <script src="/app.js" data-page="secret"></script>
</body>
</html>
